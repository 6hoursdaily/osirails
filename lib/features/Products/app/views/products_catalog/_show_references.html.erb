<% unless @reference_id == 0 %>
  <% references = ProductReference.find(:all, :conditions => {:enable => true, :product_reference_category_id => @reference_id} )%>
  <%= show_reference_column(references) %>
  <%= observe_field("select_reference", :update => "products_list", :url => {:controller => 'products', :action => 'index'}, :method => :get, :on => "click", :with => 'id') %>
<%= observe_field("select_reference", :update => "product_reference_informations", :url => {:controller => 'product_references', :action => 'show', :id => @reference_id}, :method => :get, :on => "click") %>
<% else %>
  <% references = ProductReference.find(:all, :conditions => {:enable => true})%>
  <%= show_reference_column(references) %>
  <%= observe_field("select_reference", :update => "products_list", :url => {:controller => 'products', :action => 'index'}, :method => :get, :on => "click", :with => 'id') %>
<%= observe_field("select_reference", :update => "product_reference_informations", :url => {:controller => 'product_references', :action => 'show', :id => @reference_id}, :method => :get, :on => "click") %>
<% end %>
