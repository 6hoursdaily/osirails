<div class="frame presentation_medium">

<% form_for(@role) do |f| %>
  <%= f.error_messages %>
  
  <p>
    <%= f.label :name %>
    <%= f.form_or_view(f.text_field(:name), :name) %>
  </p>
  <p>
    <%= f.label :description %>
    <%= f.form_or_view(f.text_area(:description), :description) %>
  </p>
  <div class="form_multiple_entries">
    <%= f.label :user_ids %>
    <div class="collection">
      <% for user in (is_form_view? ? User.find(:all, :order => :username) : @role.users) %>
        <div class="object">
          <%= check_box_tag("role[user_ids][]", user.id, @role.users.include?(user)) if is_form_view? %>
          <label><%= link_to(user.username, user) %></label>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
</div>