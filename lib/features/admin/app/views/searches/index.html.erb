<h1>Rechercher</h1>

<% content_for :header do %>
     <%= javascript_include_tag 'search' %>
     <%= javascript_include_tag :defaults %> 
<% end %>

<div class="frame presentation_medium">
  <h2>Section</h2>
  <p>
    <input type="hidden" id="choosen_model" value=""/>
    <select id="model_select">
      <option selected="true"></option>  
      <% @searches.each_pair do |feature,models| %>
        <%="<optgroup label='#{ feature }'"%>
        <% models.each do |model|%>
          <%="<option value='#{ feature }'> #{ model }"%></option>
        <% end %>
      <% end %>
    </select>
    
    <%=observe_field("model_select",:on=>"onselect",:with => "'model=' + value" ,:url=>{:action=>"model_choose",:line=>0},:href=>(url_for :action=>"model_choose"),:confirm => "Etes vous sur de vouloir changer de section de recherche? \nCeci aura pour conséquence de réinitiliser les critères") %>
  </p>
<%form_remote_tag :url =>  "searches/update", :update => "search_result"  do%>
  <h2>Crit&egrave;res</h2>
  <div id="criteria">
    <div id="criteria_list">
    </div>
  </div>
  <p id="submit_button">
    <%=submit_tag("rechercher")%>
  <p>
<% end %>
<div id="search_result">
</div>
</div>
