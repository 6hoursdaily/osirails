<div class="presentation_medium">

  <% leave_request = close_form %>
  
  <% form_for(leave_request, :url => close_leave_request_path(leave_request)) do |f| %>
    
    <!--############## Leave informations ##############-->
    
    <%= "<h2>Informations</h2>" %>
    <p>
      <%= f.label :status %>
      <%= f.strong view_status(leave_request) %>
    </p>
    <% if leave_request.was_cancelled? %>
      <p>
        <%= f.label :cancelled_at %>
        <%= f.strong leave_request.cancelled_at.to_datetime.strftime("%A %d %B %Y à %Hh%M") %>
      </p>
    <% end %>
    <p>
      <%= f.label :employee %>
      <%= link_to leave_request.employee.fullname, employee_path(leave_request.employee) %>
      <%= f.label("Service")%>
      <%= link_to leave_request.employee.service.name, service_path(leave_request.employee.service.id) %>    
    </p>
    <p>
      <%= f.label :submitted_at %>
      <%= f.strong leave_request.submitted_at.to_datetime.strftime("%A %d %B %Y à %Hh%M") %>
    </p>
    <p>
      <%= f.label :period %>
      <%= f.strong view_dates(leave_request) %>
    </p>
    
    <p>
      <%= f.label :leave_type %>
      <%= f.strong leave_request.leave_type.name %>
    </p>
    <p>
      <%= f.label :comment%>
      <% if leave_request.comment.nil? or leave_request.comment == ""  %>
        <%= f.strong "aucun" %>
      <% else %>
        <%= f.strong leave_request.comment %>
      <% end %>
    </p>
    
    <!--############## Responsible check ##############-->
    
    <%= "<h2>R&eacute;ponse du responsable</h2>" %>
    <p>  
      <%= f.label :responsible_agreement %>
      <%= f.strong view_responsible_agreement(leave_request) %>   
      <%= f.label :responsible %>
      <%= link_to "#{leave_request.responsible.first_name} #{leave_request.responsible.last_name}", employee_path(leave_request.responsible) %>
    </p>
    <p> 
      <%= f.label :checked_at %>
      <%= f.strong leave_request.checked_at.to_datetime.strftime("%A %d %B %Y à %Hh%M") %>
    </p>
    <p>
      <%= f.label :responsible_remarks %>
      <%= f.strong(leave_request.responsible_remarks.blank? ? "aucun" : leave_request.responsible_remarks) %>
    </p>

    <!--############## Observer notification ##############-->
    
    <%= "<h2>Observation des ressources humaines</h2>" %>
    <p>  
      <%= f.label :acquired_leaves_days %>
      <%= f.strong "#{leave_request.acquired_leaves_days} jours" %>   
      <%= f.label :observer %>
      <%= link_to "#{leave_request.observer.first_name} #{leave_request.observer.last_name}", employee_path(leave_request.observer) %>  
    </p> 
    <p>  
      <%= f.label :duration %>
      <%= f.strong "#{leave_request.duration} jours" %> 
    </p> 
    <p>
      <%= f.label :noticed_at %>
      <%= f.strong leave_request.noticed_at.to_datetime.strftime("%A %d %B %Y à %Hh%M") %>
    </p>  
    <p>
      <%= f.label :observer_remarks %>
      <%= f.strong leave_request.observer_remarks %> 
    </p>   
    
    <!--############## Director close ##############-->
  
    <%= "<h2>R&eacute;ponse de la direction</h2>"%>
    <%= f.error_messages %>
    <p>  
      <%= f.label :agreement_true %>
      <%= f.radio_button(:director_agreement, "true") %>
      <%= f.label :agreement_false %>
      <%= f.radio_button(:director_agreement, "false") %>     
    </p>  
    <p>
      <%= f.label :director_remarks %>
      <%= f.text_area(:director_remarks, :rows => 5) %>
      <!--## f.text_area_autoresize(:director_remarks, :rows => 2) ##--> 
    </p>
    <p>
      <%= f.reset "Réinitialiser" %>
      <%= f.submit button_name %>
    </p>
    
  <% end %>

</div>
